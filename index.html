<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Travesura Realizada</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Montserrat:wght@400;600&display=swap');

        :root {
            --gold: #e6c200;
            --dark-blue: #0a0e29;
            --magic-glow: #00e1ff;
            --romance: #ff4d6d;
        }

        body {
            background: radial-gradient(circle at center, #1a1a40 0%, #000000 100%);
            color: var(--gold);
            font-family: 'Montserrat', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-align: center;
        }

        /* Part√≠culas doradas de fondo */
        #particles { position: absolute; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .p { position: absolute; background: var(--gold); border-radius: 50%; opacity: 0.6; animation: float linear infinite; }
        @keyframes float { to { transform: translateY(-110vh) rotate(360deg); } }

        #main-box {
            background: rgba(10, 14, 41, 0.95);
            border: 2px solid var(--gold);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(230, 194, 0, 0.3);
            width: 90%;
            max-width: 400px;
            z-index: 10;
            backdrop-filter: blur(10px);
            position: relative;
        }

        h1, h2, h3 { font-family: 'Cinzel Decorative', serif; margin: 15px 0; }
        .separator { border: 0; height: 1px; background: linear-gradient(to right, transparent, var(--gold), transparent); margin: 15px 0; }

        input {
            background: transparent; border: none; border-bottom: 2px solid var(--gold);
            color: white; font-size: 1.1rem; text-align: center; width: 90%;
            padding: 10px; margin: 20px 0; outline: none;
        }

        .btn {
            background: var(--gold); color: black; border: none;
            padding: 15px 25px; font-family: 'Cinzel Decorative', serif;
            font-weight: bold; border-radius: 50px; cursor: pointer;
            width: 100%; transition: 0.3s; margin-top: 10px;
            box-shadow: 0 5px 15px rgba(230, 194, 0, 0.4);
        }

        #magic-icon { font-size: 60px; display: block; margin: 10px 0; transition: 0.5s; }
        .hidden { display: none !important; }

        /* Lluvia final */
        .drop { position: absolute; top: -50px; animation: fall linear forwards; z-index: 5; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

<audio id="music" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
</audio>

<div id="particles"></div>

<div id="main-box">
    <div id="screen-start">
        <h1>‚ú® ALOHOMORA ‚ú®</h1>
        <div class="separator"></div>
        <p>Juro solemnemente que mis intenciones no son buenas...</p>
        <button class="btn" onclick="startExperience()">TRAVESURA REALIZADA</button>
    </div>

    <div id="screen-game" class="hidden">
        <small id="header-text" style="letter-spacing: 2px;">[PROYECTO GIRASOL]</small>
        <div class="separator"></div>
        <span id="magic-icon">üå±</span>
        <p id="q-text">Cargando hechizo...</p>
        <input type="text" id="ans-input" placeholder="Tu respuesta..." autocomplete="off">
        <button class="btn" onclick="checkAnswer()">Lanzar Hechizo</button>
        <p id="msg" style="font-size: 0.8rem; color: #ff6666; margin-top: 10px; min-height: 20px;"></p>
    </div>

    <div id="screen-final" class="hidden">
        <h2>üåª HECHIZO COMPLETADO üåª</h2>
        <div class="separator"></div>
        <p>Has demostrado ser una hechicera excepcional.</p>
        <h3>¬øQuieres ser mi San Valent√≠n?</h3>
        <button class="btn" style="background: #00ff41;" onclick="celebrate()">¬°S√ç, ACEPTO!</button>
        <button class="btn" id="no-btn" style="background: #444; color: #ccc;" onclick="handleNo()">No</button>
    </div>

    <div id="screen-love" class="hidden">
        <h1 style="font-size: 2.5rem;">‚ú® ‚ù§Ô∏è ‚ú®</h1>
        <h2>TRAVESURA REALIZADA</h2>
        <p>Eres mi mejor aventura. ¬°Feliz San Valent√≠n!</p>
    </div>
</div>

<script>
    const config = {
        questions: [
            { q: "¬øEn qu√© fecha comenz√≥ todo? (DD/MM/AAAA)", a: "24/04/2024" },
            { q: "¬øCu√°l fue la primera foto nuestra que te gust√≥?", a: "espejo" }, // Aceptar√° si contiene "espejo"
            { q: "¬øA qu√© lugar viajamos juntos por primera vez?", a: "ayacucho" }
        ],
        sarcasm: [
            "¬°Por las barbas de Merl√≠n! Intenta de nuevo. üßô‚Äç‚ôÇÔ∏è",
            "¬øUn muggle te borr√≥ la memoria? ü§®",
            "¬°C√≥mo no te vas a acordar! Pi√©nsalo bien. ‚ú®",
            "Error 9¬æ: Respuesta no v√°lida. üöÇ"
        ],
        noMessages: ["¬øEst√°s segura? ü§®", "Pi√©nsalo bien... ‚ú®", "¬øDe verdad? ü•∫", "¬°No puedes decir que no! ü™Ñ"]
    };

    let step = 0;
    let noIdx = 0;

    // Crear fondo
    for(let i=0; i<40; i++) {
        let p = document.createElement('div');
        p.className = 'p';
        p.style.left = Math.random() * 100 + 'vw';
        p.style.width = p.style.height = Math.random() * 5 + 'px';
        p.style.animationDuration = Math.random() * 5 + 5 + 's';
        p.style.top = Math.random() * 100 + 'vh';
        document.getElementById('particles').appendChild(p);
    }

    function startExperience() {
        const music = document.getElementById('music');
        music.play().catch(() => console.log("Audio bloqueado"));
        document.getElementById('screen-start').classList.add('hidden');
        document.getElementById('screen-game').classList.remove('hidden');
        loadQ();
    }

    function loadQ() {
        document.getElementById('q-text').innerText = config.questions[step].q;
        document.getElementById('ans-input').value = "";
        document.getElementById('msg').innerText = "";
    }

    function checkAnswer() {
        const val = document.getElementById('ans-input').value.toLowerCase().trim();
        const correct = config.questions[step].a.toLowerCase();
        
        // L√≥gica: La 1 y 3 exactas, la 2 que contenga la palabra "espejo"
        if ((step !== 1 && val === correct) || (step === 1 && val.includes("espejo"))) {
            step++;
            if (step === 1) document.getElementById('magic-icon').innerText = "üåø";
            if (step === 2) document.getElementById('magic-icon').innerText = "üåª";
            
            if (step < config.questions.length) loadQ();
            else showFinal();
        } else {
            document.getElementById('msg').innerText = config.sarcasm[Math.floor(Math.random()*config.sarcasm.length)];
        }
    }

    function showFinal() {
        document.getElementById('screen-game').classList.add('hidden');
        document.getElementById('screen-final').classList.remove('hidden');
    }

    function handleNo() {
        const btn = document.getElementById('no-btn');
        btn.innerText = config.noMessages[noIdx % config.noMessages.length];
        noIdx++;
        // Peque√±o efecto de vibraci√≥n
        document.getElementById('main-box').animate([
            { transform: 'translateX(0)' }, { transform: 'translateX(5px)' }, { transform: 'translateX(0)' }
        ], { duration: 100 });
    }

    function celebrate() {
        document.getElementById('screen-final').classList.add('hidden');
        document.getElementById('screen-love').classList.remove('hidden');
        setInterval(() => {
            const d = document.createElement('div');
            d.className = 'drop';
            d.innerText = ["‚ù§Ô∏è", "üåª", "‚ú®", "‚ö°"][Math.floor(Math.random()*4)];
            d.style.left = Math.random() * 100 + 'vw';
            d.style.fontSize = Math.random() * 20 + 20 + 'px';
            d.style.animationDuration = Math.random() * 2 + 3 + 's';
            document.body.appendChild(d);
            setTimeout(() => d.remove(), 5000);
        }, 200);
    }
</script>
</body>
</html>
